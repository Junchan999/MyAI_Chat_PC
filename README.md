## Myチャット履歴PC版 Ver1.06

AIとの会話を記録し、管理するための多機能なWebチャットアプリケーション。

### 目次

*   [概要](#概要)
*   [機能](#機能)
*   [使い方](#使い方)
    *   [1. APIキーの設定（必須）](#1-apiキーの設定必須)
    *   [2. チャットの開始](#2-チャットの開始)
    *   [3. メッセージの送信](#3-メッセージの送信)
    *   [4. 画像の添付](#4-画像の添付)
    *   [5. 音声入力](#5-音声入力)
    *   [6. メッセージの削除・編集](#6-メッセージの削除編集)
    *   [7. チャットの保存](#7-チャットの保存)
    *   [8. 履歴の閲覧と読み込み](#8-履歴の閲覧と読み込み)
    *   [9. 各種設定](#9-各種設定)
    *   [10. 自動応答タイマー](#10-自動応答タイマー)
    *   [11. PDFプレビューとダウンロード](#11-pdfプレビューとダウンロード)
*   [データ保存について](#データ保存について)
*   [ライセンス](#ライセンス)

---

### 概要

このWebアプリケーションは、GoogleのGemini AIを活用して、ユーザーがAIと自由に対話できる環境を提供します。会話履歴はブラウザのローカルストレージに保存され、後から検索、読み込み、編集、削除が可能です。AIの性格設定や自動応答、チャット履歴の概要生成など、パーソナルなAIアシスタントとして様々な用途で利用できます。

### 機能

*   **AIとの対話:**
    *   テキストメッセージの送信 (Enterで送信、Shift+Enterで改行)。
    *   画像ファイルの添付 (クリップボタンまたは入力欄へのペースト)。
    *   音声入力機能 (マイクボタン)。
    *   簡単な絵文字入力ボタン。
    *   AIからの応答時に通知音を再生 (設定でON/OFF、音種変更可能)。
*   **チャット履歴管理:**
    *   現在のチャット内容を保存し、AIが自動でタイトルと概要を生成。
    *   保存された履歴はMarkdown形式でダウンロード。
    *   保存されたチャット履歴を一覧表示、検索、並べ替え（日付/タイトル、昇順/降順）。
    *   選択した履歴の読み込み、削除。
    *   会話中の個別のメッセージの選択、削除、編集。
*   **各種設定:**
    *   Gemini APIキーの設定、テスト、削除。
    *   AIの「性格」（システムプロンプト）設定と設定例。
    *   自動応答時のAIへのプロンプト設定。
    *   チャット概要生成時のAIへのプロンプト設定 (会話履歴を挿入するプレースホルダー `{CONVERSATION_HISTORY}` をサポート)。
    *   ユーザー名とAI名の設定。
    *   サウンドの有効/無効、サウンドタイプの選択。
    *   各種設定のCSVエクスポート/インポート。
    *   全チャット履歴のJSONエクスポート/インポート（マージまたは上書き選択可）。
*   **便利機能:**
    *   指定した時間間隔でAIが自動応答するタイマー機能。
    *   現在のチャット内容をPDFとしてプレビューし、ダウンロードする機能。
    *   現在の日時表示。

### 使い方

#### 1. APIキーの設定（必須）

1.  右上の「**API設定**」ボタンをクリックします。
2.  Google Cloud Consoleなどで取得したGemini APIキーを入力欄にペーストします。
3.  「**APIキーをテスト**」ボタンでAPIキーの有効性を確認できます。
4.  「**保存**」ボタンをクリックして設定を保存します。

#### 2. チャットの開始

*   アプリケーション起動時は自動的に新しいチャットが開始されます。
*   既存のチャット中に新しいチャットを始めたい場合は、右上の「**新しいチャット**」ボタンをクリックします。現在のチャット内容を破棄するか確認されます。

#### 3. メッセージの送信

1.  画面下部のテキスト入力欄にメッセージを入力します。
2.  `Enter` キーを押すとメッセージが送信されます。
3.  `Shift + Enter` で改行できます。

#### 4. 画像の添付

1.  入力欄の左下にあるクリップアイコン `📎` のボタンをクリックし、画像ファイルを選択します。
2.  または、画像を入力欄に直接ペーストすることもできます。
3.  添付された画像はプレビュー表示され、`✖` ボタンで削除できます。
4.  画像とテキストを同時に送信することも可能です。

#### 5. 音声入力

1.  入力欄の左下にあるマイクアイコン `🎤` のボタンをクリックすると音声入力が開始されます。
2.  録音中はアイコンが `🎙️` に変わります。
3.  もう一度マイクボタンをクリックするか、一定時間発言がないと音声入力が終了し、認識されたテキストが入力欄に追加されます。

#### 6. メッセージの削除・編集

1.  チャットボックス内の任意のメッセージをクリックすると、そのメッセージが選択状態になります（背景色が変化）。
2.  複数のメッセージを選択することも可能です。
3.  選択後、ヘッダーに表示される「**選択を削除**」ボタンで選択したメッセージを一括削除できます。
4.  メッセージが1つだけ選択されている場合、「**選択を編集**」ボタンが表示され、クリックするとモーダルウィンドウでメッセージ内容を編集できます。

#### 7. チャットの保存

1.  ヘッダーの「**チャット保存**」ボタンをクリックします。
2.  AIが現在のチャット履歴からタイトルと概要を自動生成し、Markdown形式のファイルとしてダウンロードされます。
3.  同時に、生成されたタイトルと概要、そして会話履歴自体がブラウザのローカルストレージに保存され、履歴リストからいつでも読み込めるようになります。

#### 8. 履歴の閲覧と読み込み

1.  ヘッダーの「**履歴一覧**」ボタンをクリックすると、保存されたチャット履歴のリストが表示されます。
2.  リストは検索入力欄でフィルタリングしたり、日付やタイトルで並べ替えたりできます。
3.  読み込みたい履歴のチェックボックスをオンにして、「**選択を読込**」ボタンをクリックすると、その履歴がチャットボックスに表示されます。
4.  履歴リスト内から不要な履歴を選択し、「**選択を削除**」ボタンで削除することもできます。

#### 9. 各種設定

1.  ヘッダーの「**各種設定**」ボタンをクリックします。
2.  **AIの性格（システムプロンプト）:** AIにどのような役割や口調で応答させるかを指定します。
3.  **自動応答プロンプト:** 自動応答タイマーが作動した際にAIに送信される指示を設定します。
4.  **チャット概要生成プロンプト:** チャット保存時にタイトルと概要を生成するAIへの指示を設定します。`{CONVERSATION_HISTORY}` に実際の会話履歴が挿入されます。
5.  **会話履歴の名前設定:** あなたとAIの表示名を変更できます。
6.  **サウンド設定:** AI応答音のON/OFFと、サウンドの種類を選択できます。
7.  **全チャット履歴のエクスポート/インポート:** ローカルストレージに保存されている全てのチャット履歴をJSON形式でバックアップ/復元できます。
8.  **設定のCSVエクスポート/インポート:** 各種設定内容をCSVファイルとしてバックアップ/復元できます。
9.  変更後、「**保存**」ボタンをクリックして設定を適用します。

#### 10. 自動応答タイマー

1.  サイドパネルの入力欄に分単位で数値を入力します（例: 5）。
2.  「**開始**」ボタンをクリックするとタイマーが開始され、設定した時間ごとにAIが自動で応答します。
3.  「**停止**」ボタンでタイマーを中断できます。

#### 11. PDFプレビューとダウンロード

1.  チャットを保存済み、または履歴からチャットを読み込み済みの状態で、ヘッダーの「**PDFプレビュー**」ボタンをクリックします。
2.  現在のチャット内容がPDF形式で表示されるプレビュー画面が開きます。
3.  「**PDFをダウンロード**」ボタンをクリックすると、適切なファイル名でPDFがダウンロードされます。

### データ保存について

*   **APIキー、会話履歴、チャット履歴、各種設定の全ては、お使いのブラウザのローカルストレージに保存されます。**
*   **サーバーには一切データは送信・保存されません。**
*   ブラウザのキャッシュや閲覧履歴を消去すると、保存したデータがすべて失われる可能性がありますのでご注意ください。重要な履歴は定期的に「チャット保存」機能でMarkdownファイルとしてダウンロードするか、「全履歴をJSONで保存」機能でバックアップを取ることを強くお勧めします。
*   Gemini APIの利用料金は、APIキーを発行したご自身のGoogleアカウントに準じます。利用量にご注意ください。

### ライセンス

このプロジェクトは、特に指定がない限り、オープンソースライセンスの下で提供されます。詳細は `LICENSE` ファイル（存在する場合）を参照してください。
